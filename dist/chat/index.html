<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat ao Vivo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="./script.js"></script>
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
  <div class="container mx-auto p-4">
    <div class="chat-container shadow-lg w-full max-w-md mx-auto">
      <!-- Chat Header -->
      <div class="chat-header p-4 text-white flex justify-between items-center">
        <div class="flex items-center">
          <div class="w-3 h-3 bg-green-400 rounded-full mr-2"></div>
          <h2 class="font-bold">Chat ao Vivo</h2>
        </div>
        <div class="text-sm">
          <span id="online-count">1</span> online
        </div>
      </div>

      <!-- Messages Area -->
      <div id="messages-container" class="messages-container bg-gray-50 p-4 h-96 overflow-y-auto">
        <div class="flex justify-center mb-4">
          <div class="bg-gray-200 text-gray-600 rounded-full px-3 py-1 text-xs">
            Início da conversa
          </div>
        </div>
        <!-- Messages will be added here -->
      </div>

      <!-- Login Form (initially visible) -->
      <div id="login-form" class="p-4 bg-white border-t">
        <div class="mb-3">
          <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
          <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Seu nome">
        </div>
        <div class="mb-3">
          <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
          <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="seu@email.com">
        </div>
        <button id="start-chat" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition duration-200">
          Entrar no Chat
        </button>
      </div>

      <!-- Message Input (initially hidden) -->
      <div id="message-input" class="p-4 bg-white border-t hidden">
        <div class="flex items-center relative">
          <input type="text" id="message" class="flex-grow px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Digite sua mensagem...">
          <button id="emoji-button" class="px-3 py-2 bg-gray-100 text-gray-600 hover:bg-gray-200 transition">
            <i class="far fa-smile"></i>
          </button>
          <button id="send-message" class="px-4 py-2 bg-indigo-600 text-white rounded-r-md hover:bg-indigo-700 transition">
            <i class="fas fa-paper-plane"></i>
          </button>

          <!-- Enhanced Emoji Picker -->
          <div id="emoji-picker" class="emoji-picker">
            <div class="emoji-tabs">
              <div class="emoji-tab active" data-category="smileys">😊</div>
              <div class="emoji-tab" data-category="gestures">👍</div>
            </div>
            <div class="emoji-content">
              <!-- Smileys & Emotions -->
              <div class="emoji-category active" id="smileys">
                <span class="emoji-btn">😀</span>
                <span class="emoji-btn">😃</span>
                <span class="emoji-btn">😄</span>
              </div>

              <!-- Gestures & People -->
              <div class="emoji-category" id="gestures">
                <span class="emoji-btn">👋</span>
                <span class="emoji-btn">🤚</span>
                <span class="emoji-btn">🖐️</span>
              </div>
            </div>
          </div>
        </div>
        <div class="text-xs text-gray-500 mt-2">
          Conectado como <span id="user-display"></span>
          <button id="logout" class="text-indigo-600 hover:underline ml-2">Sair</button>
        </div>
      </div>
    </div>
  </div>

  <script>
  </script>
  <script>
    (function() {
      function c() {
        var b = a.contentDocument || a.contentWindow.document;
        if (b) {
          var d = b.createElement('script');
          d.innerHTML = "window.__CF$cv$params={r:'93d55b1485d25224',t:'MTc0NjgzNzMxOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
          b.getElementsByTagName('head')[0].appendChild(d)
        }
      }
      if (document.body) {
        var a = document.createElement('iframe');
        a.height = 1;
        a.width = 1;
        a.style.position = 'absolute';
        a.style.top = 0;
        a.style.left = 0;
        a.style.border = 'none';
        a.style.visibility = 'hidden';
        document.body.appendChild(a);
        if ('loading' !== document.readyState) c();
        else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c);
        else {
          var e = document.onreadystatechange || function() {};
          document.onreadystatechange = function(b) {
            e(b);
            'loading' !== document.readyState && (document.onreadystatechange = e, c())
          }
        }
      }
    })();
  </script>
</body>

</html>
